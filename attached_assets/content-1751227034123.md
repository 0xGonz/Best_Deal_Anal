In-Depth Analysis of Deal Allocation and Capital Call Lifecycle

Content may be unverified or unsafe. [Report](https://openai.com/form/report-content/)

ChatGPTTry ChatGPT

[ChatGPT](https://chatgpt.com/?utm_src=deep-research-sharing)

# Deal Allocation and Capital Call Lifecycle Analysis

## Allocation Status States & Transitions

**Allocation Status Enum:** Each fund allocation can be in one of several states – **committed**, **partially\_paid**, **funded**, **unfunded**, or **written\_off** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/shared/schema.ts). These denote the lifecycle of an investment commitment, from initial pledge to full funding (or cancellation/default). Key statuses and their meanings:

- **committed** – Initial state for a new allocation (capital committed but no payment yet)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md). All allocations start as **committed**.

- **partially\_paid** – Indicates that some capital has been paid/called but the full commitment isn’t yet fulfilled[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md). Any payment (less than 100%) against the commitment moves the allocation here.

- **funded** – The full committed amount has been paid (100% funded)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md). This is the final successful state once all calls are paid in full.

- **unfunded** – Used when an allocation is effectively canceled or set to $0 (e.g. investor withdraws or never provides funds)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md). It signifies no funding will occur on that commitment.

- **written\_off** – Marks an investment that is failed or written off. This is a terminal state set manually if the deal or investor’s commitment is abandoned (e.g. deal failure).


**Transition Triggers:** The system enforces a sequential state progression based on payments received: **committed → partially\_paid → funded** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts). The transition logic is primarily driven by comparing the total **paidAmount** against the committed **amount** for each allocation:

- If **paidAmount = 0**, status remains **committed** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts).

- If **0 < paidAmount < committed amount**, status becomes **partially\_paid** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts).

- If **paidAmount ≥ committed amount**, status becomes **funded** (full funding achieved)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts).


There is a special case: if an allocation’s committed **amount** is set to 0 (e.g. a commitment was rescinded), it is immediately marked **unfunded** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). Likewise, **written\_off** can be applied if an investment is manually marked as a loss. The typical state flow can be visualized as:

> **committed** (no payments yet) → _payments made_ → **partially\_paid** (in progress) → _final payment_ → **funded** (fully paid).
>
> _(If commitment canceled: goes to **unfunded**. If investment failed: **written\_off** can occur at any point.)_

These rules are implemented in the backend as a **state machine** for allocations. For example, the `AllocationStatusService.calculateStatus()` (and related logic) uses the paid vs. committed ratio to decide the correct state[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). In code, any partial payment updates the allocation status to “partially\_paid” and a 100% payment updates it to “funded”[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts). This automatic status synchronization ensures the allocation’s status always reflects the actual funding progress.

**Deal Stage Updates:** Notably, when an allocation is created, the system also updates the associated deal’s stage to “invested” to reflect that the deal has secured a commitment[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). This occurs at commitment time (deal moves out of closing stage once an allocation is recorded), even if the capital isn’t fully paid yet. There isn’t a separate “partially invested” stage – the deal is considered invested once commitments are in place. No further automatic deal-stage changes happen on payments (the deal remains in _invested_ stage throughout the funding process).

## Capital Call Status Lifecycle

Each **capital call** (a drawdown request on an allocation) has its own status lifecycle, which interacts with the allocation’s status. Capital call statuses include **scheduled**, **called**, **partially\_paid**, **paid**, **overdue**, and **defaulted** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/shared/schema.ts):

- **scheduled** – The call is planned but not yet issued (e.g. created in advance of the call date).

- **called** – The capital call is issued (active) and awaiting payment. This is typically the status once a call is initiated (if not using “scheduled”).

- **partially\_paid** – A partial payment has been received for this call, but the full call amount is not yet paid[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). For example, if an LP was called for $100k and paid only $60k, the call is **partially\_paid** with an outstanding balance.

- **paid** – The call has been fully paid (paidAmount equals the callAmount)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). No outstanding amount remains.

- **overdue** – The due date for the call has passed without full payment. (The system likely flags calls as **overdue** via a date check if status is still not paid by the deadline).

- **defaulted** – The call was never fully paid and has been marked as defaulted (unrecoverable). In default, the outstanding amount might be written off or canceled. For instance, when a call is marked **defaulted**, the code sets its outstanding amount to 0 (since it’s not expected to be paid)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts).


**Capital Call Transitions:** The capital call module enforces a progression: **scheduled → called → partially\_paid → paid**, with optional branches to **overdue/defaulted** if payments fail[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). Valid transitions are defined in a configuration, preventing illegal jumps (e.g. you cannot go from _partially\_paid_ back to _called_). Typically:

- **scheduled** calls become **called** on the call date or when officially issued.

- **called** calls move to **partially\_paid** upon receiving a partial payment, or directly to **paid** if fully paid in one go[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md).

- **partially\_paid** calls move to **paid** when the remaining balance is paid off[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md).

- If a call is not honored by the due date, it may transition to **overdue** (and later possibly **defaulted** by an admin action). A **defaulted** call is a terminal state indicating the investor failed to pay; at that point the remaining commitment might be considered canceled or the allocation marked as **unfunded** if no other calls remain.


**Allocation vs Capital Call Sync:** An allocation can have one or many capital calls. The allocation’s overall status takes into account all related calls and payments. Essentially, as soon as any capital call is paid (even partially), the allocation should reflect **partially\_paid**, and once all calls are fully settled, the allocation becomes **funded**. If an allocation has multiple calls, the system waits until **all** calls are completed to mark it funded. For example, the CapitalCallService checks after each call payment whether any call remains unpaid; if not, it updates the allocation status to **funded** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts). Conversely, if even one call is outstanding, the allocation stays **partially\_paid**. This ensures that **funded** truly means 100% of committed capital has been received.

**Example:** Suppose an investor committed $750,000. The GP issues a 30% call ($225k) and a separate $100k call. If the investor pays the $225k in full and only $60k of the $100k call:

- The first call becomes **paid** (fully settled $225k). The second call is **partially\_paid** ($60k paid on $100k) with $40k outstanding.

- The allocation’s status will be **partially\_paid** in this scenario (not all money in yet). Its **paidAmount** would be $285k total, vs. $750k committed. It won’t flip to **funded** until that remaining $40k is paid.


In this scenario, **called capital** for the allocation is $325k (the total of calls issued), and **uncalled** remains $425k (the part of commitment not yet called)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md). The **outstanding** amount on issued calls is $40k (unpaid portion of the $325k called).

## Backend Implementation of Status Updates

**Automatic Status Calculation:** The backend does **not** rely on manual intervention for status changes – it computes and updates them automatically based on transaction data. Initially, when a fund allocation is created, it’s saved with status “committed” (and paidAmount=0). From that point, status updates occur as part of the payment and capital call workflows:

- When a **capital call payment** is received, the system updates both the capital call and the allocation. The capital call’s paidAmount and status are updated (e.g. to partially\_paid or paid), and then the allocation’s paidAmount and status are recalculated to reflect the sum of payments across all calls[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). This can happen in an atomic workflow – for example, a PaymentWorkflowService computes the new allocation status and does an `updateFundAllocation` in the same transaction as recording the payment[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md).

- The status rules (committed vs partial vs funded) are encoded both in application logic and reinforced by database logic. For instance, a helper function or service method will return “funded” if paid ≥ amount, etc. The repository fix scripts show this clearly: they recalc status as `CASE WHEN paid>=amount THEN 'funded' WHEN paid>0 THEN 'partially_paid' ELSE 'committed' END` [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). These conditions are the backbone of status transitions.

- **Database triggers** have been put in place to keep allocation totals in sync with capital call changes. After some bugs were discovered, the team implemented a **trigger on the `capital_calls` table** so that any INSERT/UPDATE/DELETE on capital calls will recompute the parent allocation’s `paid_amount` and status in real-time[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). This means even if a capital call is updated directly, the allocation will automatically reflect the change (no stale data). Initially, the trigger summed all payment amounts, but it was later refined to consider only fully paid calls for status – however, that approach was adjusted to ensure partial payments aren’t missed (see **Issues** below).

- Besides triggers, periodic **consistency scripts** were used during development to fix any discrepancies. For example, `fix-allocation-status-sync.ts` and `complete-allocation-status-fix.ts` scan all allocations, compare the allocation’s recorded paidAmount/status to the sum of its capital calls, and correct any mismatches[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). These scripts logged issues like _“Paid amount mismatch: allocation shows X, capital calls show Y”_ and _“Status incorrect: should be Z based on payment data”_, then applied fixes[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). The end result was a one-time cleanup and the introduction of the trigger-based syncing to prevent future drift.


**Called vs Uncalled Capital:** The system distinguishes between **called capital** (the portion of commitments that has been formally drawn via capital calls) and **uncalled capital** (commitment remaining to be called). These are calculated rather than stored static, ensuring they reflect the latest state:

- At the **allocation level**, the API computes a field often termed `calledAmount`, usually as the sum of all callAmount for that allocation[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/database-storage.ts). In other words, how much of this allocation _has been called for payment_. Uncalled amount for the allocation is simply _commitment – calledAmount_. The allocation’s `paidAmount` (sums of payments) may be less than calledAmount if some calls are unpaid. The front-end uses these to display progress (more on that below).

- At the **fund level**, the FundService computes total **calledCapital** by summing over allocations: for each allocation, if status is funded, add full amount; if partially\_paid, add whatever has been paid so far (or the amount if data is missing); committed/unfunded/written\_off count as 0 called[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). This ensures **calledCapital** reflects actual money deployed (all fully paid commitments plus any partial payments on in-progress ones)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). Then **uncalledCapital** = total commitments – calledCapital[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md). These calculations are done on the fly or cached when presenting fund metrics. The AUM (Assets Under Management) is tied to called capital (i.e. actual paid-in capital) – the system updates AUM to equal called capital for each fund, so that AUM grows as calls are paid[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md).


**Frequency of Updates:** Updates to these values occur in real time during normal operations. When a user records a payment or marks a capital call as paid, the backend immediately updates the relevant records. With the trigger in place, the allocation’s paid total and status update automatically in the same database transaction. The system also explicitly updates fund metrics (like AUM) at key points – for example, after each allocation or payment, they recalc and update the fund’s AUM and called/uncalled totals[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/fund.service.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/fund.service.ts). This layered approach (application logic + DB triggers) provides redundancy to keep data consistent.

**Example Workflow:** Creating a capital call via the backend will calculate its outstanding amount and insert it, but initially the allocation status might remain committed until a payment is applied[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts). Once a payment is added (or a capital call is marked paid), the backend either through trigger or service logic updates the allocation’s paidAmount and status to partial/paid accordingly. In a “single call, immediate funding” scenario, the code creates the capital call with status ‘paid’ and sets the allocation status to **funded** right away (one-step process)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts). In a typical multi-call scenario, each partial payment will keep the allocation at **partially\_paid**, and only when the last call is settled does an update set it to **funded** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts).

## Frontend Display and Real-Time Consistency

On the frontend, the allocation and capital call data is presented in dashboards that mirror the backend state. The UI does **not** do complex status calculation on its own; instead it relies on fields provided by the API (which are kept in sync as described). Key UI components include an **Allocation details view** (with a status badge and capital call summary) and fund overview metrics:

- Each allocation row shows a **Status badge** indicating “Committed”, “Partially Paid”, “Funded”, etc. This badge is derived directly from the allocation’s `status` field as returned by the backend[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx). The statuses use the same labels and are styled consistently (e.g. committed = blue, partially\_paid = yellow, funded = green, unfunded/written\_off = gray)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx). This means the frontend expects those exact status strings. (Any inconsistency in naming – e.g. if the backend had “partial” vs “partially\_paid” – would cause a mismatch. See **Issues** below on how this was resolved.)

- The allocation component also displays **Called, Paid, Uncalled, and Outstanding amounts** for that allocation, giving a mini summary of its capital call progress. These values are calculated client-side from the data of the allocation and its calls. For example, the component computes:

**committed** = allocation.amount (total commitment),

**called** = allocation.calledAmount (total called via all capital calls),

**paid** = allocation.paidAmount (total actually paid so far),

**uncalled** = committed – called,

**outstanding** = called – paid (i.e. issued calls not yet paid)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx).


It also computes percentages (called vs committed, and paid vs called) to visualize progress[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx). This logic assumes the backend provides accurate `calledAmount` and `paidAmount` fields for each allocation. In the current implementation, the API’s `getAllocationsByFund` already joins in the summed call amounts as `calledAmount` and includes the stored `paidAmount` [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/database-storage.ts), so the UI can rely on them. The **uncalled** and **outstanding** are simple differences derived from those values, and the progress bar reflects the % paid of what’s been called[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx) (so an allocation fully paid will have a full green bar, etc.).

- **Fund-level dashboard**: The frontend fund overview shows aggregate **Committed**, **Called**, and **Uncalled** capital for the entire fund[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md). These are computed by summing allocations (often the backend provides these in a convenient API or they can be derived from the list of allocations). Since the backend ensures that for each allocation, called + uncalled = committed (except write-offs), the totals also make sense: _Total Committed_ is the sum of all allocation amounts, _Total Called_ is the sum of all calledAmount across allocations (which backend calculates as calledCapital), and _Uncalled_ = Committed – Called. The UI updates these whenever new allocations or calls are added.


**Real-time reflection:** Because the backend updates allocation statuses immediately on payment events, and the frontend likely uses reactive data fetching (or at least refreshes after actions), the statuses shown to the user will reflect the latest state. For instance, if a user records a payment that completes a capital call, the next API response will show that call as **paid** and the allocation’s status potentially as **funded** (if that was the last call). The design goal is consistency: the “Partially Paid” or “Funded” labels on an allocation should exactly match the underlying data in the database at that moment.

One challenge encountered was ensuring the frontend didn’t display stale data from caches. During testing, it was noted that after certain updates, the UI needed a fresh fetch to show the new status. The team addressed this by forcing cache invalidation or fresh loads (e.g. clearing React Query caches or always fetching latest on certain actions)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts). A post-mortem noted that ensuring the API always returns up-to-date values (and perhaps analyzing DB query plans) solved most of these issues[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts). Now, with triggers and consistent computations, if there is a partial payment, the next time the client requests the allocation list, it will see status “partially\_paid” and an updated paidAmount.

In summary, the frontend is kept simple: it trusts the backend’s status field and numeric aggregates. As long as the backend logic is correct, the UI will display the correct badge and progress. The terminology is consistent – the app uses the same keywords “Committed”, “Partially Paid”, “Funded” on both sides, so users see a unified picture. Real-time updates (without a page refresh) may require the client to re-fetch data after certain actions. There isn’t indication of a live push (e.g. no WebSocket events here), so “real-time” in practice means “immediately on the next fetch.” In testing, all expected transitions have been observed to update automatically (e.g. marking a call as paid turned the allocation to funded right away)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md).

## Inconsistencies, Bugs, and Edge Cases

During development, a few inconsistencies were identified in how statuses and amounts were handled. These have been largely resolved, but they’re worth noting:

- **Partial vs Partially\_Paid Label:** At one point, the code had two labels referring to the same concept – e.g. some records or logic used `"partial"` while others used `"partially_paid"`. This dual-label issue caused confusion and bugs (e.g. the UI expecting “partially\_paid” but an older record might be “partial”)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). An internal code audit flagged this and recommended consolidating on **"partially\_paid"** as the single canonical status, and migrating any old records or enums to that value[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). This has been addressed by updating the database enum and code to use **partially\_paid** consistently. Ensuring a single source of truth for status names prevents a whole class of UI/backend mismatches.

- **Allocation Paid Amount Sync Problems:** Earlier, the allocation’s `paidAmount` field sometimes fell out of sync with the sum of capital call payments. For example, an allocation might still show paidAmount = $0 (and status “committed”) even though a capital call had a partial payment recorded. This led to allocations stuck in the wrong state. The root cause was that the system wasn’t consistently updating the parent allocation on each payment in all cases (especially with multiple partial calls). The fix was twofold: a script was run to **recompute all allocations’ paid totals and statuses from their capital call data**, and the **database trigger** was added to automatically propagate changes going forward[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). After these fixes, the team reported that _“committed → partially\_paid → funded transitions now work correctly”_ and _“Capital call payments automatically update allocation status”_ with no manual intervention[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts). In other words, an allocation should never again be left in “committed” when payments have been made, or in “partially\_paid” when it’s actually fully paid.

- **Outstanding Balance vs Paid Tracking:** There was a subtle bug in how partial payments were counted toward the allocation. Initially, the trigger logic simply summed all capital\_call `paid_amount` s to update an allocation’s paidAmount[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). This correctly included partial payments. However, a later version of the trigger tried to sum only fully paid calls (status = 'paid')[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts). That approach would ignore money from calls still in `partially_paid` status, effectively under-reporting the paidAmount at the allocation level until calls were completed. Such a discrepancy would make the “Outstanding” figure on the UI incorrect (it would show the entire call as outstanding even if a partial payment was received). The development notes indicate this was caught and the logic was adjusted back to summing actual paid amounts of all calls (not just closed calls) so that allocation.paidAmount truly reflects all funds received[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts). Ensuring _paidAmount_ never misses partial payments was part of the synchronization fixes. Now the **Outstanding = called – paid** on the frontend should align exactly with the sum of unpaid portions of calls. Testing confirms scenarios like a $100k call with $60k paid result in an outstanding $40k, as expected, and the allocation status shows **partially\_paid** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md).

- **Unfunded/Default Edge Case:** If an investor defaults (fails to pay) on a call, the platform can mark that call as **defaulted**. However, how this affects the allocation status and amounts requires a business decision. Currently, if no payment was made at all and the call is defaulted, the allocation would technically still have paidAmount=0. It may remain in **committed** status unless action is taken. In practice, one might cancel the commitment (set to 0 and mark **unfunded**) or write it off. If a partial payment was made and then default on the remainder, the allocation would stay **partially\_paid** (since some money came in, but not full). There isn’t an automatic “defaulted” status for allocations – instead the allocation would likely be manually adjusted (e.g. reduced commitment or marked written\_off) if an LP defaults entirely. This is an area for potential enhancement: e.g. automatically marking an allocation as **unfunded** or flagging it if a capital call defaults. Right now it requires manual cleanup to accurately reflect a default scenario.

- **Deal Stage vs Funding Completion:** As mentioned, a deal is marked “invested” once an allocation is committed, even if the funds are not fully in. This could be seen as an inconsistency in cases where a commitment falls through. For example, if an allocation was created (deal moved to invested) but then the LP defaulted and the allocation became unfunded, the deal stage might still show _invested_ in the pipeline. There’s no automated reversion of deal stage. Handling this would be a higher-level process (perhaps the GP would cancel that allocation and maybe mark the deal back to “closing” if no other investors). In the current implementation, this situation would need manual intervention. It’s a minor edge case, but worth noting that **deal status is not dynamically tied to payment status** – it’s updated at allocation creation time and remains unless explicitly changed.

- **Performance and Consistency:** The team also discovered performance bottlenecks and introduced improvements that indirectly improve consistency. For example, they added an index on capital\_call status to speed up queries that check for any unpaid calls (used when updating allocation status)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). They also implemented caching for fund metrics calculations and an approach to always fetch allocations with joined call totals to avoid stale or inconsistent data on the front end[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/database-storage.ts). These changes reduce the chance of timing issues or partial updates (e.g. the UI getting data in the middle of an update).


## Recommendations for Improvement

The current design handles the allocation and capital call lifecycle robustly after the recent fixes. To further improve clarity and correctness, we recommend:

- **Consolidate Business Logic in One Place:** Right now, logic exists in triggers, services, and scripts. Creating a single **Allocation Status Calculator** (a pure function) would help document the rules and ensure consistency. In fact, an audit suggested a pure function that takes an allocation’s commitment and its calls (amounts and paid) and returns the exact called, paid, outstanding, and status values[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). This could be used both in the backend (for updates) and in unit tests to verify all scenarios (commitment with no calls, partial calls, full funding, etc.). Having this one source of truth makes it less likely to introduce discrepancies when the logic evolves.

- **Strengthen Enum Integrity:** The team should enforce at the database level that only the valid status values exist (they have an enum in schema, which is good). Since they already fixed the dual-label issue, running a one-time migration to replace any legacy “partial” statuses with “partially\_paid” and dropping any old enums is important. Going forward, strict use of the enum (and updating it in code and DB together) will prevent divergence. Any similar overlaps (e.g. ensure capital call statuses are consistently named, like “partial\_paid” vs “partially\_paid”) should be avoided – it appears they standardized on **partially\_paid** everywhere now[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt).

- **Event-Driven Updates:** Introduce domain events for key lifecycle milestones. For example, when a capital call is fully paid, emit an event like **CapitalCallPaid**, and when an allocation becomes fully funded, emit **AllocationFunded** [GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). This decouples the side-effects – instead of various services all remembering to update fund AUM, deal status, notifications, etc., listeners to these events can handle it. The audit suggested that AUM recalculation be triggered by such events rather than scattered calls[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). Adopting an event-driven approach would improve maintainability and ensure nothing is missed when status changes occur (especially as the platform grows features like notifications or investor communications on certain events).

- **Improve Default/Unfunded Handling:** It would be useful to add some automation for when an allocation is not going to be funded (default scenario). For instance, if a capital call is defaulted, the system might automatically mark the allocation as **unfunded** (and perhaps notify the team). This could involve setting allocation.amount to 0 or moving it to written\_off depending on context. At minimum, flagging such allocations for review would improve data accuracy (so that an allocation doesn’t linger in partially\_paid forever if the remaining will never be paid).

- **UI Real-time Updates:** To make the frontend truly real-time, consider using websockets or push notifications for critical status changes. For example, after recording a payment, the server could push an update to the client that the allocation status changed to funded. Currently, the client likely refreshes or refetches manually. While not strictly necessary in the scope of this system, it would enhance user experience by showing status changes instantly without a page reload. Short of that, ensuring the UI refreshes the data grid after any payment or call update is important (this may already be implemented via refetching queries).

- **Additional Validation and Testing:** The platform should continue to enforce business rules to prevent inconsistent states. For instance, ensure you cannot mark an allocation “funded” if paidAmount is less than commitment (the triggers and logic do this). It’s worth adding **unit tests** for the state machine (cover committed → partial → funded transitions, and edge cases like zero amounts, or multiple calls)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). Also integration tests where a sequence of calls and payments are made, then verifying the final status and balances[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). This will catch any regression in the lifecycle logic quickly.

- **Performance and Scaling:** As a minor note, monitor the effect of the trigger on high volume. The trigger runs an aggregate query on capital\_calls for each change – an index on (allocation\_id, status) was suggested to optimize queries that the trigger and other checks perform[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt). This should be implemented to keep the system snappy as the number of calls grows. Also, if in the future there are _many_ partial payments (e.g. if capital\_call\_payments table gets large), ensure the mechanism that updates capital\_calls.paid\_amount (summing payments) is efficient and that the trigger reacts to changes in capital\_calls accordingly.

- **Clarity in UI:** From a user perspective, it may help to explicitly show the **“uncalled commitment”** on each allocation (the UI currently shows called and outstanding, but uncalled is only shown at fund level). In allocations list, showing “Uncalled: $X” could make it clear how much of that commitment hasn’t been drawn yet. This is more of a UX suggestion. Since the data is there (amount – calledAmount), it’s easy to add and would give a full picture: committed vs called vs paid. It appears the fund dashboard does this already for totals[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md), so extending the allocation row UI to include uncalled could improve clarity.


In conclusion, the **deal allocation and capital call lifecycle** in this repository has matured into a robust system. The backend automatically manages transitions from committed to funded using clearly defined rules and now leverages database triggers for consistency. The frontend reflects these states in near real-time, giving users insight into each investment’s funding progress. By addressing the remaining edge cases (like defaults) and implementing the above recommendations (unified logic, events, and testing), the platform can further ensure that no allocation ever gets stuck in the wrong state and that all stakeholders have an accurate, up-to-date view of called vs uncalled capital at any moment.

**Sources:**

- Repository code analysis for allocation status rules[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md)

- Capital calls lifecycle and payment handling documentation[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md)

- Frontend component for allocation status display[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx)

- Internal audit and fix logs for known issues[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts)[GitHub](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt)


Citations

[schema.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/shared/schema.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/shared/schema.ts) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [complete-allocation-status-fix.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [schema.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/shared/schema.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/shared/schema.ts) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [capital-call.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [capital-call.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts) [capital-call.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [database-storage.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/database-storage.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/database-storage.ts) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION\_FUNDS\_CAPITAL\_CALLS\_ANALYSIS.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/ALLOCATION_FUNDS_CAPITAL_CALLS_ANALYSIS.md) [fund.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/fund.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/fund.service.ts) [fund.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/fund.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/fund.service.ts) [capital-call.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts) [capital-call.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts) [capital-call.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts) [capital-call.service.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/server/services/capital-call.service.ts) [CapitalCallColumn.tsx\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx) [CapitalCallColumn.tsx\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx) [CapitalCallColumn.tsx\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx) [CapitalCallColumn.tsx\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx) [CapitalCallColumn.tsx\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx) [CapitalCallColumn.tsx\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/client/src/components/allocations/CapitalCallColumn.tsx) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [complete-allocation-status-fix.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts) [complete-allocation-status-fix.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached\_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [fix-allocation-status-sync.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/fix-allocation-status-sync.ts) [complete-allocation-status-fix.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts) [complete-allocation-status-fix.ts\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/scripts/complete-allocation-status-fix.ts) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md) [Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached\_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt) [Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached\_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt) [Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached\_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt) [Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached\_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt) [Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached\_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/attached_assets/Pasted-Deep-Clean-Code-Audit-Allocation-Capital-Call-and-Fund-Modules-Below-is-a-punch-list-that-surfac-1748958100213.txt) [CAPITAL\_CALLS\_MODULE\_FIXES.md\\
\\
https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL\_CALLS\_MODULE\_FIXES.md](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/docs/CAPITAL_CALLS_MODULE_FIXES.md)

All Sources

[github](https://github.com/0xGonz/DealFlowLifecyclev1/blob/cd713fac20e640e937710016bf0ca89be93ef2a5/shared/schema.ts)